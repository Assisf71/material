theme_bw(14)
d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq()) %>%
ggplot(aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
library(googlesheets)
gs_auth()
d_gs <- 'Aula dos alunos' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_respostas <- gs_read(d_gs, verbose = FALSE, ws = 1)
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq()) %>%
ggplot(aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
library(googlesheets)
gs_auth()
d_gs <- 'Aula dos alunos' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_respostas <- gs_read(d_gs, verbose = FALSE, ws = 1)
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq()) %>%
ggplot(aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
27*150
library(googlesheets)
gs_auth()
d_gs <- 'Aula dos alunos' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_respostas <- gs_read(d_gs, verbose = FALSE, ws = 1)
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq()) %>%
ggplot(aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
library(googlesheets)
gs_auth()
d_gs <- 'Aula dos alunos' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_respostas <- gs_read(d_gs, verbose = FALSE, ws = 1)
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq()) %>%
ggplot(aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
p <- d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq()) %>%
ggplot(aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
plotly::ggplotly(p)
p
plotly::ggplotly(p)
p <- d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq()) %>%
ggplot(aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
plotly::ggplotly(p)
install.packages('plotly')
install.packages("plotly")
library(googlesheets)
gs_auth()
d_gs <- 'Aula dos alunos' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_respostas <- gs_read(d_gs, verbose = FALSE, ws = 1)
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
p <- d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq()) %>%
ggplot(aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
plotly::ggplotly(p)
library(magrittr)
library(tidyverse)
p <- d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq()) %>%
ggplot(aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
plotly::ggplotly(p)
library(lubridate)
library(tibble)
library(readr)
library(tidyr)
library(dplyr)
library(ggplot2)
library(stringr)
library(lubridate)
library(forcats)
library(haven)
library(googlesheets)
gs_auth()
d_gs <- 'Aula dos alunos' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_respostas <- gs_read(d_gs, verbose = FALSE, ws = 1)
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
p <- d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq()) %>%
ggplot(aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
plotly::ggplotly(p)
d_tidy <-  d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq())
p <- ggplot(d_tidy, aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
plotly::ggplotly(p)
library(plotly)
ggplotly(p)
p <- ggplot(d_tidy, aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
plotly::ggplotly(p)
d_tidy
p <- ggplot(d_tidy[,c(2,3)], aes(x = tema, fill = tema)) +
guides(fill = F) +
geom_bar() +
theme_bw(14)
plotly::ggplotly(p)
d_tidy[,c(2,3)]
p
ggplotly(p)
library(tibble)
library(readr)
library(tidyr)
library(dplyr)
library(ggplot2)
library(stringr)
library(lubridate)
library(forcats)
library(haven)
library(googlesheets)
gs_auth()
d_gs <- 'Aula dos alunos' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_respostas <- gs_read(d_gs, verbose = FALSE, ws = 1)
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
d_tidy <-  d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq())
p <- ggplot(d_tidy[,c(2,3)], aes(x = tema, fill = tema)) +
geom_bar() +
theme_bw(14)
plotly::ggplotly(p)
p <- ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar() +
theme_bw(14)
plotly::ggplotly(p)
p <- ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar() +
theme_bw()
plotly::ggplotly(p)
p <- ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar()
plotly::ggplotly(p)
devtools::session_info()
devtools::session_info()
saveRDS(p, 'p.rds')
plotly::ggplotly(readRDS('p.rds'))
library(tibble)
library(readr)
library(tidyr)
library(dplyr)
library(ggplot2)
library(stringr)
library(lubridate)
library(forcats)
library(haven)
library(googlesheets)
gs_auth()
d_gs <- 'questionario_curso-r_verao2017' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_quest <- gs_read(d_gs, verbose = FALSE, ws = 1)
d_inscr <- gs_read(d_gs, verbose = FALSE, ws = 2) %>%
select(email, tipo, periodo) %>%
distinct(email, .keep_all = TRUE) %>%
mutate(email = str_trim(email))
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
library(googlesheets)
gs_auth()
d_gs <- 'Aula dos alunos' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_respostas <- gs_read(d_gs, verbose = FALSE, ws = 1)
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
d_tidy <-  d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq())
ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar()
ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar() +
guides(colour = FALSE) +
theme_bw()
ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar() +
guides(colour = FALSE) +
theme_bw()
ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar() +
guides(colour = FALSE) +
theme_bw(14)
ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar() +
guides(colour = FALSE) +
theme_bw(14)
ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar() +
guides(fill = FALSE) +
theme_bw(14)
library(tibble)
library(readr)
library(tidyr)
library(dplyr)
library(ggplot2)
library(stringr)
library(lubridate)
library(forcats)
library(haven)
library(googlesheets)
gs_auth()
d_gs <- 'Aula dos alunos' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_respostas <- gs_read(d_gs, verbose = FALSE, ws = 1)
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
d_tidy <-  d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq())
ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar() +
guides(fill = FALSE) +
theme_bw(14)
ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar() +
guides(fill = FALSE) +
theme_bw(14)
library(tibble)
library(readr)
library(tidyr)
library(dplyr)
library(ggplot2)
library(stringr)
library(lubridate)
library(forcats)
library(haven)
library(googlesheets)
gs_auth()
d_gs <- 'Aula dos alunos' %>%
gs_ls() %>%
with(sheet_key) %>%
gs_key(verbose = FALSE)
d_respostas <- gs_read(d_gs, verbose = FALSE, ws = 1)
renomear <- function(d) {
x <- names(d) %>%
tolower %>%
abjutils::rm_accent() %>%
str_replace_all('[[:space:]/\\-().:]+', '_') %>%
str_trim() %>%
str_replace_all('_+', '_') %>%
str_replace_all('_$', '')
names(d) <- x
d
}
d_tidy <-  d_respostas %>%
setNames(c('timestamp', 'topico')) %>%
mutate(timestamp = mdy_hms(timestamp)) %>%
separate(topico, c('a', 'b', 'c'), sep = ',', fill = 'right') %>%
gather(opcao, tema, a:c) %>%
filter(!is.na(tema)) %>%
mutate(tema = str_match(tema, '([^-]+) -')[,2]) %>%
mutate(tema = str_wrap(tema, 10) %>%
fct_infreq())
ggplot(d_tidy, aes(x = tema, fill = tema)) +
geom_bar() +
guides(fill = FALSE) +
theme_bw(14)
d_tidy
d_tidy %>% count(tema, sort=T)
